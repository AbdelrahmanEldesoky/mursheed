import{u as Q,r as u,E as $,c,d as r,x as A,w as N,f as a,L as G,g as d,e as i,t as h,n as f,k as T,j as F,h as x}from"./index-c8ed3a98.js";const H={class:"flex justify-center"},J=["onSubmit"],K={class:"w-full flex justify-between"},P=a("h2",{class:"text-xl font-bold"}," Create Offer ",-1),W={class:""},X=a("label",{for:"password"},"Offer Number ",-1),Y={key:0,class:"mt-1 mb-5 text-red-500"},Z={class:""},ee=a("label",{for:"password"},"Title ",-1),te={key:0,class:"mt-1 mb-5 text-red-500"},le={class:""},ae=a("label",{for:"password"},"price ",-1),se={key:0,class:"mt-1 mb-5 text-red-500"},oe=["src"],ue=["src"],ne={key:0,class:"mt-1 mb-5 text-red-500"},re={class:"flex mt-4"},ce={class:"flex items-center"},de=a("label",{class:"mx-2"}," status ",-1),ve={setup(ie){const y=Q(),s=u({number:"",title:"",status:!0,price:""}),_=u(0),V=u(""),g=u([]),n=u({}),l=u("");u(0),u(0);const m=u([]),L=u([{name:"en",value:"gb"},{name:"ar",value:"sa"},{name:"az",value:"az"},{name:"ge",value:"ge"},{name:"ru",value:"ru"},{name:"tr",value:"tr"}]),v=u("gb"),O=t=>{console.log(t.files[0]),m.value=t.files,V.value=t.files;for(let e=0;e<m.value.length;e++)g.value.push(URL.createObjectURL(m.value[e]));console.log(g.value)},j=()=>{const t=new FormData;for(let e=0;e<m.value.length;e++)t.append("images[]",m.value[e]);t.append("number",s.value.number),t.append("title",s.value.title),t.append("status",s.value.status),t.append("price",s.value.price),_.value?(x.defaults.headers.common.local=v.value,x.post(`/api/offers/${n.value.id}/update`,t).then(e=>{l.value=[],_.value=1,n.value=e.data.offer,y.add({severity:"success",summary:"Successful",detail:"Offer Created",life:3e3})}).catch(e=>{l.value=e.response.data.errors,console.log(l.value)})):(x.defaults.headers.common.local=v.value,x.post("/api/offers/create",t).then(e=>{l.value=[],_.value=1,n.value=e.data.offer,console.log(n.value),y.add({severity:"success",summary:"Successful",detail:"Offer Created",life:3e3})}).catch(e=>{l.value=e.response.data.errors,console.log(l.value)}))};return $(v,async(t,e)=>{var b,p;console.log(n.value),_.value&&(s.value.title=((b=n.value)==null?void 0:b.title[t])==null?"":(p=n.value)==null?void 0:p.title[t])}),(t,e)=>{const b=c("Dropdown"),p=c("InputNumber"),D=c("InputText"),E=c("FileUpload"),z=c("InputSwitch"),R=c("Button"),q=c("Toast"),M=c("va-card");return r(),A(M,{class:"card"},{default:N(()=>{var U,k,S,B;return[a("div",H,[a("form",{onSubmit:G(j,["prevent"]),class:"flex flex-col w-3/4 py-9"},[a("div",K,[P,d(b,{modelValue:v.value,"onUpdate:modelValue":e[0]||(e[0]=o=>v.value=o),editable:"",options:L.value,optionLabel:"name","option-value":"value",class:"w-28 mx-3"},null,8,["modelValue","options"])]),a("div",W,[X,d(p,{modelValue:s.value.number,"onUpdate:modelValue":e[1]||(e[1]=o=>s.value.number=o),type:"text",class:"mt-3 w-full mb-3"},null,8,["modelValue"]),(U=l.value)!=null&&U.number?(r(),i("div",Y,h(l.value.number[0]),1)):f("",!0)]),a("div",Z,[ee,d(D,{modelValue:s.value.title,"onUpdate:modelValue":e[2]||(e[2]=o=>s.value.title=o),type:"text",class:"mt-3 w-full mb-3"},null,8,["modelValue"]),(k=l.value)!=null&&k.title?(r(),i("div",te,h(l.value.title[0]),1)):f("",!0)]),a("div",le,[ae,d(p,{modelValue:s.value.price,"onUpdate:modelValue":e[3]||(e[3]=o=>s.value.price=o),type:"text",class:"mt-3 w-full mb-3"},null,8,["modelValue"]),(S=l.value)!=null&&S.price?(r(),i("div",se,h(l.value.price[0]),1)):f("",!0)]),a("div",null,[d(E,{id:"password",onUploader:O,accept:"image/*",required:"true",multiple:"true","custom-upload":!0,autofocus:""},{empty:N(()=>{var o,C,I;return[V.value.value!=""?(r(!0),i(F,{key:0},T(g.value,w=>(r(),i("img",{src:w,class:"w-[200px] h-[90px] mb-3"},null,8,oe))),256)):(C=(o=n.value)==null?void 0:o.media)!=null&&C.length?(r(!0),i(F,{key:1},T((I=n.value)==null?void 0:I.media,w=>(r(),i("img",{src:w.original_url,class:"w-[200px] h-[90px] mb-3"},null,8,ue))),256)):f("",!0)]}),_:1}),(B=l.value)!=null&&B.images?(r(),i("div",ne,h(l.value.images[0]),1)):f("",!0)]),a("div",re,[a("div",ce,[de,d(z,{modelValue:s.value.status,"onUpdate:modelValue":e[4]||(e[4]=o=>s.value.status=o)},null,8,["modelValue"])])]),d(R,{type:"submit",label:"Submit",class:"mt-3"})],40,J)]),d(q)]}),_:1})}}};export{ve as default};
