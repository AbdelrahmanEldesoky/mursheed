import{u as W,r as n,o as G,b as H,F as J,c as r,d as c,e as m,f as a,g as s,w as o,h as N,i as b,t as g,A as w,n as v}from"./index-c8ed3a98.js";const Q={class:"grid"},X={class:"col-12"},Z={class:"my-2"},ee={class:"flex flex-column md:flex-row md:justify-between md:align-items-center"},le=a("h5",{class:"m-0"},"Manage users",-1),se={class:"block mt-2 md:mt-0 p-input-icon-left"},te=a("i",{class:"pi pi-search"},null,-1),ae={class:"field mb-5"},oe=a("label",{for:"first"},"first name ",-1),ie={key:0,class:"p-invalid"},ue={class:"field mb-5"},ne=a("label",{for:"last"},"last name ",-1),de={key:0,class:"p-invalid"},re={class:"field mb-5"},ce=a("label",{for:"email",class:"mb-3"},"email ",-1),me={key:0,class:"p-invalid"},ve={class:"field mb-5"},pe=a("label",{for:"password",class:"mb-3"},"password ",-1),fe={key:0,class:"p-invalid"},_e={class:"field mb-5"},be=a("label",{for:"mobile",class:"mb-3"},"mobile",-1),he={key:0,class:"p-invalid"},ye={class:"flex align-items-center justify-content-center"},ge=a("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1),we={key:0},ke=b("Are you sure you want to delete "),Ce=b("?"),xe={class:"flex align-items-center justify-content-center"},Ve=a("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1),Ne={key:0},De={setup(Se){const h=W(),T=n(null),D=n(!0),e=n({}),P=n(null),p=n(!1),y=n(!1),k=n(!1),M=n({}),C=n(null),U=n(null),x=n({}),u=n(!1);n([{label:"INSTOCK",value:"instock"},{label:"LOWSTOCK",value:"lowstock"},{label:"OUTOFSTOCK",value:"outofstock"}]),G(()=>{I()});const V=()=>{N.get("/api/users").then(i=>{D.value=!1,P.value=i.data.users})};H(()=>{V()});const q=()=>{M.value={},u.value=!1,p.value=!0},L=()=>{p.value=!1,u.value=!1},O=()=>{u.value=!0,!(!e.value.first_name||!e.value.last_name||!e.value.email||!e.value.mobile_number)&&(e.value.id?(N.post(`/api/users/${e.value.id}/update`,e.value).then(i=>{console.log(i.data),V(),h.add({severity:"success",summary:"Successful",detail:"user updated",life:3e3})}).catch(()=>{}),h.add({severity:"success",summary:"Successful",detail:"Product Updated",life:3e3})):N.post("/api/users/create",e.value).then(i=>{console.log(i.data),V(),h.add({severity:"success",summary:"Successful",detail:"user Created",life:3e3})}).catch(()=>{}),p.value=!1,e.value={})},$=i=>{e.value={...i},p.value=!0},B=i=>{e.value=i,y.value=!0},F=()=>{N.delete(`/api/users/${e.value.id}/delete`).then(i=>{console.log(i.data),y.value=!1,V(),h.add({severity:"success",summary:"Successful",detail:"user deleted",life:3e3})}).catch(()=>{})},A=()=>{U.value.exportCSV()},E=()=>{T.value=T.value.filter(i=>!C.value.includes(i)),k.value=!1,C.value=null,h.add({severity:"success",summary:"Successful",detail:"Products Deleted",life:3e3})},I=()=>{x.value={global:{value:null,matchMode:J.CONTAINS}}};return(i,t)=>{const d=r("Button"),j=r("Toolbar"),z=r("Toast"),f=r("InputText"),_=r("Column"),K=r("DataTable"),S=r("Dialog"),R=r("va-card");return c(),m("div",Q,[a("div",X,[s(R,{class:"card"},{default:o(()=>[s(j,{class:"mb-4"},{start:o(()=>[a("div",Z,[s(d,{label:"New",icon:"pi pi-plus",class:"new mr-2",onClick:q})])]),end:o(()=>[s(d,{label:"Export",icon:"pi pi-upload",class:"new",onClick:t[0]||(t[0]=l=>A())})]),_:1}),s(z),s(K,{ref_key:"dt",ref:U,selection:C.value,"onUpdate:selection":t[2]||(t[2]=l=>C.value=l),value:P.value,loading:D.value,"data-key":"id",paginator:!0,rows:10,filters:x.value,"paginator-template":"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown","rows-per-page-options":[5,10,25],"current-page-report-template":"Showing {first} to {last} of {totalRecords} products","responsive-layout":"scroll"},{header:o(()=>[a("div",ee,[le,a("span",se,[te,s(f,{modelValue:x.value.global.value,"onUpdate:modelValue":t[1]||(t[1]=l=>x.value.global.value=l),placeholder:"Search..."},null,8,["modelValue"])])])]),default:o(()=>[s(_,{"selection-mode":"multiple","header-style":"width: 3rem"}),s(_,{field:"first_name",header:"first_name",sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:o(l=>[b(g(l.data.first_name),1)]),_:1}),s(_,{field:"last_name",header:"Last Name",sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:o(l=>[b(g(l.data.last_name),1)]),_:1}),s(_,{field:"email",header:"Email",sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:o(l=>[b(g(l.data.email),1)]),_:1}),s(_,{field:"mobile_number",header:"Mobile Number",sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:o(l=>[b(g(l.data.mobile_number),1)]),_:1}),s(_,{"header-style":"min-width:10rem;"},{body:o(l=>[s(d,{icon:"pi pi-pencil",class:"p-button-rounded p-button-success mr-2",onClick:Y=>$(l.data)},null,8,["onClick"]),s(d,{icon:"pi pi-trash",class:"delete rounded-full mt-2",onClick:Y=>B(l.data)},null,8,["onClick"])]),_:1})]),_:1},8,["selection","value","loading","filters"]),s(S,{visible:p.value,"onUpdate:visible":t[8]||(t[8]=l=>p.value=l),style:{width:"450px"},header:"users form",modal:!0,class:"p-fluid"},{footer:o(()=>[s(d,{label:"Cancel",icon:"pi pi-times",class:"p-button-text",onClick:L}),s(d,{label:"Save",icon:"pi pi-check",class:"p-button-text",onClick:O})]),default:o(()=>[a("div",ae,[oe,s(f,{class:w(["mt-3",{"p-invalid":u.value&&!e.value.first_name}]),id:"first",modelValue:e.value.first_name,"onUpdate:modelValue":t[3]||(t[3]=l=>e.value.first_name=l),modelModifiers:{trim:!0},required:"true",autofocus:""},null,8,["modelValue","class"]),u.value&&!e.value.first_name?(c(),m("small",ie,"First Name is required.")):v("",!0)]),a("div",ue,[ne,s(f,{class:w(["mt-3",{"p-invalid":u.value&&!e.value.last_name}]),id:"last",modelValue:e.value.last_name,"onUpdate:modelValue":t[4]||(t[4]=l=>e.value.last_name=l),modelModifiers:{trim:!0},required:"true",autofocus:""},null,8,["modelValue","class"]),u.value&&!e.value.last_name?(c(),m("small",de,"Last Name is required.")):v("",!0)]),a("div",re,[ce,s(f,{class:w(["mt-3",{"p-invalid":u.value&&!e.value.email}]),id:"email",modelValue:e.value.email,"onUpdate:modelValue":t[5]||(t[5]=l=>e.value.email=l),modelModifiers:{trim:!0},required:"true",autofocus:""},null,8,["modelValue","class"]),u.value&&!e.value.email?(c(),m("small",me,"Email is required.")):v("",!0)]),a("div",ve,[pe,s(f,{class:w(["mt-3",{"p-invalid":u.value&&!e.value.password}]),id:"password",modelValue:e.value.password,"onUpdate:modelValue":t[6]||(t[6]=l=>e.value.password=l),modelModifiers:{trim:!0},required:"true",autofocus:""},null,8,["modelValue","class"]),u.value&&!e.value.password?(c(),m("small",fe,"password is required.")):v("",!0)]),a("div",_e,[be,s(f,{class:w(["mt-3",{"p-invalid":u.value&&!e.value.mobile_number}]),id:"mobile",modelValue:e.value.mobile_number,"onUpdate:modelValue":t[7]||(t[7]=l=>e.value.mobile_number=l),modelModifiers:{trim:!0},required:"true",autofocus:""},null,8,["modelValue","class"]),u.value&&!e.value.mobile_number?(c(),m("small",he,"mobile is required.")):v("",!0)])]),_:1},8,["visible"]),s(S,{visible:y.value,"onUpdate:visible":t[10]||(t[10]=l=>y.value=l),style:{width:"450px"},header:"Confirm",modal:!0},{footer:o(()=>[s(d,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:t[9]||(t[9]=l=>y.value=!1)}),s(d,{label:"Yes",icon:"pi pi-check",class:"p-button-text",onClick:F})]),default:o(()=>[a("div",ye,[ge,e.value?(c(),m("span",we,[ke,a("b",null,g(e.value.first_name),1),Ce])):v("",!0)])]),_:1},8,["visible"]),s(S,{visible:k.value,"onUpdate:visible":t[12]||(t[12]=l=>k.value=l),style:{width:"450px"},header:"Confirm",modal:!0},{footer:o(()=>[s(d,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:t[11]||(t[11]=l=>k.value=!1)}),s(d,{label:"Yes",icon:"pi pi-check",class:"p-button-text",onClick:E})]),default:o(()=>[a("div",xe,[Ve,M.value?(c(),m("span",Ne,"Are you sure you want to delete the selected products?")):v("",!0)])]),_:1},8,["visible"])]),_:1})])])}}};export{De as default};
