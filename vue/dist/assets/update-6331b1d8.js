import{u as A,r as u,B as Q,E as G,b as H,h as g,c as d,d as r,x as J,w as C,f as l,L as K,g as i,e as c,t as b,n as f,k as I,j as F,A as P,i as W}from"./index-c8ed3a98.js";const X={class:"flex justify-center"},Y=["onSubmit"],Z={class:"pb-4 text-center va-text-bold"},ee=W(" Update Offer "),te={class:""},ae=l("label",{for:"password"},"Title ",-1),le={key:0,class:"mt-1 mb-5 text-red-500"},se={class:""},oe=l("label",{for:"password"},"Offer Number ",-1),ue={key:0,class:"mt-1 mb-5 text-red-500"},ne={class:""},re=l("label",{for:"password"},"price ",-1),de={key:0,class:"mt-1 mb-5 text-red-500"},ie=["src"],ce=["src"],me={key:0,class:"mt-1 mb-5 text-red-500"},pe={class:"flex mt-4"},ve={class:"flex items-center"},fe=l("label",{class:"mx-2"}," status ",-1),he={setup(_e){const y=A(),a=u({number:"",title:"",status:!0,price:"",images:[]}),L=Q(),O=u(0),w=u(""),h=u([]),o=u(""),n=u({});u(0),u(0);const p=u([]),D=u([{name:"en",value:"gb"},{name:"ar",value:"sa"},{name:"az",value:"az"},{name:"ge",value:"ge"},{name:"ru",value:"ru"},{name:"tr",value:"tr"}]),v=u("gb"),j=t=>{console.log(t.files[0]),p.value=t.files,w.value=t.files;for(let e=0;e<p.value.length;e++)h.value.push(URL.createObjectURL(p.value[e]));console.log(h.value)},z=()=>{const t=new FormData;for(let e=0;e<p.value.length;e++)t.append("images[]",p.value[e]);t.append("number",a.value.number),t.append("title",a.value.title),t.append("status",1),t.append("price",a.value.price),g.defaults.headers.common.local=v.value,g.post(`/api/offers/${n.value.id}/update`,t).then(e=>{o.value=[],O.value=1;let m=n.value.media;n.value=e.data.offer,n.value.media=m,y.add({severity:"success",summary:"Successful",detail:"Offer Created",life:3e3})}).catch(e=>{o.value=e.response.data.errors,console.log(o.value)})};return G(v,async(t,e)=>{var m,_;console.log(n.value),a.value.title=((m=n.value)==null?void 0:m.title[t])==null?"":(_=n.value)==null?void 0:_.title[t]}),H(()=>{g.get(`/api/offers/${L.params.id}`).then(t=>{a.value.title=t.data.offer.title[v.value],a.value.number=t.data.offer.number,a.value.status=t.data.offer.status,a.value.price=t.data.offer.price,n.value=t.data.offer,console.log(t.data.offer),y.add({severity:"success",summary:"Successful",detail:"Offer Created",life:3e3})})}),(t,e)=>{const m=d("Dropdown"),_=d("InputText"),V=d("InputNumber"),E=d("FileUpload"),R=d("InputSwitch"),M=d("Button"),$=d("Toast"),q=d("va-card");return r(),J(q,{class:"card"},{default:C(()=>{var U,k,S,B;return[l("div",X,[l("form",{onSubmit:K(z,["prevent"]),class:"flex flex-col w-3/4 py-9"},[l("h2",Z,[ee,i(m,{modelValue:v.value,"onUpdate:modelValue":e[0]||(e[0]=s=>v.value=s),editable:"",options:D.value,optionLabel:"name","option-value":"value",class:"w-28 mx-3 mx-10"},null,8,["modelValue","options"])]),l("div",te,[ae,i(_,{modelValue:a.value.title,"onUpdate:modelValue":e[1]||(e[1]=s=>a.value.title=s),type:"text",class:"mt-3 w-full mb-3"},null,8,["modelValue"]),(U=o.value)!=null&&U.title?(r(),c("div",le,b(o.value.title[0]),1)):f("",!0)]),l("div",se,[oe,i(V,{modelValue:a.value.number,"onUpdate:modelValue":e[2]||(e[2]=s=>a.value.number=s),type:"text",class:"mt-3 w-full mb-3"},null,8,["modelValue"]),(k=o.value)!=null&&k.number?(r(),c("div",ue,b(o.value.number[0]),1)):f("",!0)]),l("div",ne,[re,i(V,{modelValue:a.value.price,"onUpdate:modelValue":e[3]||(e[3]=s=>a.value.price=s),type:"text",class:"mt-3 w-full mb-3"},null,8,["modelValue"]),(S=o.value)!=null&&S.price?(r(),c("div",de,b(o.value.price[0]),1)):f("",!0)]),l("div",null,[i(E,{id:"password",onUploader:j,accept:"image/*",required:"true",multiple:"true","custom-upload":!0,autofocus:"",class:P({"p-invalid":t.submitted})},{empty:C(()=>{var s,N,T;return[w.value!=""?(r(!0),c(F,{key:0},I(h.value,x=>(r(),c("img",{src:x,class:"w-[200px] h-[90px] mb-3"},null,8,ie))),256)):(N=(s=n.value)==null?void 0:s.media)!=null&&N.length?(r(!0),c(F,{key:1},I((T=n.value)==null?void 0:T.media,x=>(r(),c("img",{src:x.original_url,class:"w-[200px] h-[90px]"},null,8,ce))),256)):f("",!0)]}),_:1},8,["class"]),(B=o.value)!=null&&B.images?(r(),c("div",me,b(o.value.images[0]),1)):f("",!0)]),l("div",pe,[l("div",ve,[fe,i(R,{modelValue:a.value.status,"onUpdate:modelValue":e[4]||(e[4]=s=>a.value.status=s)},null,8,["modelValue"])])]),i(M,{type:"submit",label:"Submit",class:"mt-3"})],40,Y)]),i($)]}),_:1})}}};export{he as default};
