import{u as $,r as t,E as q,c,d,x as A,w as C,f as n,L as M,g as i,e as r,t as h,n as _,k as O,j as P,A as Q,i as G,h as b}from"./index-c8ed3a98.js";import{v as H,p as J,a as K}from"./filepond-plugin-image-preview.esm-30776ef6.js";const W={class:"flex justify-center"},X=["onSubmit"],Y={class:"pb-4 text-center va-text-bold"},Z=G(" Update Flight "),ee={class:""},ae=n("label",{for:"password"},"name ",-1),le={key:0,class:"mt-1 mb-5 text-red-500"},te={class:""},se=n("label",{for:"password"},"link ",-1),oe={key:0,class:"mt-1 mb-5 text-red-500"},ne={class:""},ue=n("label",{for:"password"},"discount ",-1),de={key:0,class:"mt-1 mb-5 text-red-500"},ce=["src"],ie=["src"],re={key:0,class:"mt-1 mb-5 text-red-500"},_e={setup(me){H(K,J);const x=$(),s=t({name:"",link:"",discount:0}),f=t(0),m=t(""),y=t("");t("");const u=t({}),a=t("");t(0),t([]),t(0);const k=t([]);t(null);const N=t([{name:"en",value:"gb"},{name:"ar",value:"sa"},{name:"az",value:"az"},{name:"ge",value:"ge"},{name:"ru",value:"ru"},{name:"tr",value:"tr"}]),v=t("gb"),T=l=>{k.value=l.files,m.value=l.files[0],console.log(m.value),y.value=URL.createObjectURL(m.value)},L=()=>{const l=new FormData;l.append("images",m.value),l.append("name",s.value.name),l.append("link",s.value.link),l.append("discount",s.value.discount),f.value?(b.defaults.headers.common.local=v.value,b.post(`/api/flights/${u.value.id}/update`,l).then(e=>{a.value=[],f.value=1,u.value=e.data.flight,x.add({severity:"success",summary:"Successful",detail:"Flight Created",life:3e3})}).catch(e=>{a.value=e.response.data.errors,console.log(a.value)})):(b.defaults.headers.common.local=v.value,console.log(k.value[0]),b.post("/api/flights/create",l).then(e=>{a.value=[],f.value=1,u.value=e.data.flight,console.log(u.value),x.add({severity:"success",summary:"Successful",detail:"Flight Created",life:3e3})}).catch(e=>{a.value=e.response.data.errors,console.log(a.value)}))};return q(v,async(l,e)=>{var g,p;console.log(u.value),f.value&&(s.value.name=((g=u.value)==null?void 0:g.name[l])==null?"":(p=u.value)==null?void 0:p.name[l])}),(l,e)=>{const g=c("Dropdown"),p=c("InputText"),D=c("InputNumber"),I=c("FileUpload"),j=c("Button"),z=c("Toast"),E=c("va-card");return d(),A(E,{class:"card"},{default:C(()=>{var w,V,U,F;return[n("div",W,[n("form",{onSubmit:M(L,["prevent"]),class:"flex flex-col w-3/4 py-9"},[n("h2",Y,[Z,i(g,{modelValue:v.value,"onUpdate:modelValue":e[0]||(e[0]=o=>v.value=o),editable:"",options:N.value,optionLabel:"name","option-value":"value",class:"w-28 mx-3 mx-10"},null,8,["modelValue","options"])]),n("div",ee,[ae,i(p,{modelValue:s.value.name,"onUpdate:modelValue":e[1]||(e[1]=o=>s.value.name=o),type:"text",class:"mt-3 w-full mb-3"},null,8,["modelValue"]),(w=a.value)!=null&&w.name?(d(),r("div",le,h(a.value.name[0]),1)):_("",!0)]),n("div",te,[se,i(p,{modelValue:s.value.link,"onUpdate:modelValue":e[2]||(e[2]=o=>s.value.link=o),type:"text",class:"mt-3 w-full mb-3"},null,8,["modelValue"]),(V=a.value)!=null&&V.link?(d(),r("div",oe,h(a.value.link[0]),1)):_("",!0)]),n("div",ne,[ue,i(D,{modelValue:s.value.discount,"onUpdate:modelValue":e[3]||(e[3]=o=>s.value.discount=o),type:"text",class:"mt-3 w-full mb-3"},null,8,["modelValue"]),(U=a.value)!=null&&U.discount?(d(),r("div",de,h(a.value.discount[0]),1)):_("",!0)]),n("div",null,[i(I,{id:"password",onUploader:T,accept:"image/*",required:"true","custom-upload":!0,autofocus:"",class:Q({"p-invalid":l.submitted})},{empty:C(()=>{var o,S,B;return[m.value!=""?(d(),r("img",{key:0,src:y.value,class:"w-[200px] h-[90px]"},null,8,ce)):(S=(o=u.value)==null?void 0:o.media)!=null&&S.length?(d(!0),r(P,{key:1},O((B=u.value)==null?void 0:B.media,R=>(d(),r("img",{src:R.original_url,class:"w-[200px] h-[90px]"},null,8,ie))),256)):_("",!0)]}),_:1},8,["class"]),(F=a.value)!=null&&F.images?(d(),r("div",re,h(a.value.images[0]),1)):_("",!0)]),i(j,{type:"submit",label:"Submit",class:"mt-3"})],40,X)]),i(z)]}),_:1})}}};export{_e as default};
