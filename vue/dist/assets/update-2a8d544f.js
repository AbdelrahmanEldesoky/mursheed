import{u as M,r as a,B as O,E as q,K as A,b as K,h as y,c as p,d as u,x as Q,w as C,f as i,L as G,g as m,e as d,t as w,n as h,k as L,j as D,A as H,i as J}from"./index-c8ed3a98.js";import{r as W,v as X,p as Y,a as Z}from"./filepond-plugin-image-preview.esm-30776ef6.js";import{p as ee}from"./filepond-plugin-file-encode.esm-b0bc8408.js";const te={class:"flex justify-center"},ae=["onSubmit"],le={class:"pb-4 text-center va-text-bold"},se=J(" Update Flight "),oe={class:""},ne=i("label",{for:"password"},"title ",-1),ue={key:0,class:"mt-1 mb-5 text-red-500"},ie={class:""},de=i("label",{for:"password"},"description ",-1),re={key:0,class:"mt-1 mb-5 text-red-500"},ce=["src"],pe=["src"],me={key:0,class:"mt-1 mb-5 text-red-500"},he={setup(ve){W(ee),X(Z,Y);const U=M(),s=a({title:"",description:""});a(null);const N=a([]),$=O(),j=a(0),V=a(""),b=a([]),l=a({});a(0),a(0);const v=a([]),z=a([{name:"en",value:"gb"},{name:"ar",value:"sa"},{name:"az",value:"az"},{name:"ge",value:"ge"},{name:"ru",value:"ru"},{name:"tr",value:"tr"}]),r=a("gb"),o=a(""),E=e=>{console.log(e.files[0]),v.value=e.files,V.value=e.files;for(let t=0;t<v.value.length;t++)b.value.push(URL.createObjectURL(v.value[t]));console.log(b.value)},P=()=>{const e=new FormData;for(let t=0;t<v.value.length;t++)e.append("images[]",v.value[t]);e.append("title",s.value.title),e.append("description",s.value.description),y.defaults.headers.common.local=r.value,y.post(`/api/pages/${l.value.id}/update`,e).then(t=>{o.value=[],j.value=1;let c=l.value.media;l.value=t.data.page,l.value.media=c,U.add({severity:"success",summary:"Successful",detail:"Page Updated",life:3e3})}).catch(t=>{o.value=t.response.data.errors,console.log(o.value)})};return q(r,async(e,t)=>{var c,_,g,f;console.log(l.value),s.value.title=((c=l.value)==null?void 0:c.title[e])==null?"":(_=l.value)==null?void 0:_.title[e],s.value.description=((g=l.value)==null?void 0:g.description[e])==null?"":(f=l.value)==null?void 0:f.description[e]}),A(()=>N.value),K(()=>{y.get(`/api/pages/${$.params.id}`).then(e=>{s.value.title=e.data.page.title[r.value],s.value.description=e.data.page.description[r.value],l.value=e.data.page,U.add({severity:"success",summary:"Successful",detail:"Offer Created",life:3e3})})}),(e,t)=>{const c=p("Dropdown"),_=p("InputText"),g=p("FileUpload"),f=p("Button"),R=p("Toast"),I=p("va-card");return u(),Q(I,{class:"card"},{default:C(()=>{var k,F,S;return[i("div",te,[i("form",{onSubmit:G(P,["prevent"]),class:"flex flex-col w-3/4 py-9"},[i("h2",le,[se,m(c,{modelValue:r.value,"onUpdate:modelValue":t[0]||(t[0]=n=>r.value=n),editable:"",options:z.value,optionLabel:"name","option-value":"value",class:"w-28 mx-3 mx-10"},null,8,["modelValue","options"])]),i("div",oe,[ne,m(_,{modelValue:s.value.title,"onUpdate:modelValue":t[1]||(t[1]=n=>s.value.title=n),type:"text",class:"mt-3 w-full mb-3"},null,8,["modelValue"]),(k=o.value)!=null&&k.title?(u(),d("div",ue,w(o.value.title[0]),1)):h("",!0)]),i("div",ie,[de,m(_,{modelValue:s.value.description,"onUpdate:modelValue":t[2]||(t[2]=n=>s.value.description=n),type:"text",class:"mt-3 w-full mb-3"},null,8,["modelValue"]),(F=o.value)!=null&&F.description?(u(),d("div",re,w(o.value.description[0]),1)):h("",!0)]),i("div",null,[m(g,{id:"password",onUploader:E,accept:"image/*",required:"true",multiple:"true","custom-upload":!0,autofocus:"",class:H({"p-invalid":e.submitted})},{empty:C(()=>{var n,B,T;return[V.value!=""?(u(!0),d(D,{key:0},L(b.value,x=>(u(),d("img",{src:x,class:"w-[200px] h-[90px] mb-3"},null,8,ce))),256)):(B=(n=l.value)==null?void 0:n.media)!=null&&B.length?(u(!0),d(D,{key:1},L((T=l.value)==null?void 0:T.media,x=>(u(),d("img",{src:x.original_url,class:"w-[200px] h-[90px]"},null,8,pe))),256)):h("",!0)]}),_:1},8,["class"]),(S=o.value)!=null&&S.images?(u(),d("div",me,w(o.value.images[0]),1)):h("",!0)]),m(f,{type:"submit",label:"Submit",class:"mt-3"})],40,ae)]),m(R)]}),_:1})}}};export{he as default};
